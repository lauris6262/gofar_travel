SOLUCION ASSIGNMENT_1 BASE DE DATOS AVANZADA



INTEGRANTES:

JUAN ESTEBAN MACHUCA

TANIA HERRERA

WALTER MORALES

LAURA RAMIREZ


--2. Create 3 Tablespaces (0.2)?:
--a. first one with 1 Gb and 3 datafiles, tablespace should be named "hospital_bills"
--b. second one with 500 Mb and 1 datafile, named "test_purposes".
--c. Undo tablespace with 5Mb of space and 1 datafile

--A) 
CREATE TABLESPACE HOSPITAL_BILLS DATAFILE 
'hospital_bills1.dbf' SIZE 333M,
'hospital_bills2.dbf' SIZE 333M,
'hospital_bills3.dbf' SIZE 333M
AUTOEXTEND ON NEXT 1000K MAXSIZE 1024M
EXTENT MANAGEMENT LOCAL 
SEGMENT SPACE MANAGEMENT AUTO
ONLINE;

--B)
CREATE TABLESPACE TEST_PURPOSES DATAFILE 
'test_purposes1.dbf' SIZE 100M
AUTOEXTEND ON NEXT 100K MAXSIZE 500M
EXTENT MANAGEMENT LOCAL 
SEGMENT SPACE MANAGEMENT AUTO
ONLINE;

--C)
CREATE UNDO TABLESPACE UNDO_TBS datafile
 'UNDO_TBS1.dbf' size 5M
AUTOEXTEND OFF;

--3. Set the undo tablespace to be used in the system (0.2)

ALTER SYSTEM SET UNDO_TABLESPACE = UNDO_TBS scope = both;



--4. Create a DBA user and assign it to the tablespace called "hospital_bills", this user has unlimited space
--on the tablespace (0.2)
CREATE USER DBAUSER IDENTIFIED BY DBAUSER
DEFAULT TABLESPACE  HOSPITAL_BILLS
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON HOSPITAL_BILLS;


--5. Assign the dba role and permissions to connect to the user just created (0.2)
GRANT DBA TO DBAUSER;
GRANT CONNECT, RESOURCE TO DBAUSER;

--6. Create 3 profiles. (0.2)
--a. Profile 1: "manager" password life 40 days, one session per user, 15 minutes idle, 4 failed
--login attempts
CREATE PROFILE MANAGERPROFILE LIMIT
SESSIONS_PER_USER 1
CPU_PER_SESSION UNLIMITED
CPU_PER_CALL UNLIMITED
CONNECT_TIME 240
IDLE_TIME 15
PRIVATE_SGA 20 M
FAILED_LOGIN_ATTEMPTS 4
PASSWORD_LIFE_TIME 40
PASSWORD_REUSE_MAX 4
PASSWORD_LOCK_TIME 1
PASSWORD_GRACE_TIME 2;

--b. Profile 2: "finance" password life 15 days, one session per user, 3 minutes idle, 2 failed login
--attempts
CREATE PROFILE FINANCE LIMIT
SESSIONS_PER_USER 1
CPU_PER_SESSION UNLIMITED
CPU_PER_CALL UNLIMITED
CONNECT_TIME 240
IDLE_TIME 3
PRIVATE_SGA 20 M
FAILED_LOGIN_ATTEMPTS 2
PASSWORD_LIFE_TIME 15
PASSWORD_REUSE_MAX 5
PASSWORD_LOCK_TIME 1
PASSWORD_GRACE_TIME 2;

--c. Profile 3: "development" password life 100 days, two session per user, 30 minutes idle, no
--failed login attempts
CREATE PROFILE DEVELOPMENT LIMIT 
SESSIONS_PER_USER 2
CPU_PER_SESSION UNLIMITED
CPU_PER_CALL UNLIMITED
CONNECT_TIME 240
IDLE_TIME 30
PRIVATE_SGA 20 M
FAILED_LOGIN_ATTEMPTS UNLIMITED
PASSWORD_LIFE_TIME 100
PASSWORD_REUSE_MAX 5
PASSWORD_LOCK_TIME 1
PASSWORD_GRACE_TIME 2;

--7. Create 4 users, assign them the tablespace "hospital_bills"; profiles created should be used for the
--users, all the users should be allow to connect to the database. (0.2)

CREATE USER USER1 IDENTIFIED BY USER1
DEFAULT TABLESPACE  HOSPITAL_BILLS
PROFILE MANAGERPROFILE;

GRANT CREATE SESSION TO USER1;


CREATE USER USER2 IDENTIFIED BY USER2
DEFAULT TABLESPACE  HOSPITAL_BILLS
PROFILE FINANCE;

GRANT CREATE SESSION TO USER2;


CREATE USER USER3 IDENTIFIED BY USER3
DEFAULT TABLESPACE  HOSPITAL_BILLS
PROFILE DEVELOPMENT;

GRANT CREATE SESSION TO USER3;

CREATE USER USER4 IDENTIFIED BY USER4
DEFAULT TABLESPACE  HOSPITAL_BILLS
PROFILE DEVELOPMENT;

GRANT CREATE SESSION TO USER4;

--8. Lock the users associate with profiles: manager and finance. (0.2)
ALTER USER USER1
ACCOUNT LOCK ;  

ALTER USER USER2
ACCOUNT LOCK ; 

--9. Delete the tablespace called "test_purposes" (0.2)
DROP TABLESPACE TEST_PURPOSES;
